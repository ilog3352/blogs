# 微前端

类似微服务，串联多个应用整合成一个应用

最早iframe 方式 缺点：路由无法保存 ， 弹框只能在iframe里不方便

通讯：postMessage（"*")

微前端 框架 qiankun  wujie 

核心思想：css隔离 js隔离

## qiankun方案

qiankun是基于single-spa封装的

css沙箱
1. webComponent 的 Shadow DOM   开启方式：strictStyleIsolation: true 

2. vue的Scoped方案 postcss实现 开启方式： experimentalStyleIsolation: true 

js沙箱实现：

1. 快照模式：不支持 Proxy 时使用。加载子应用前保存 window 快照；加载时将子应用挂到真实 window，卸载时恢复快照。缺点：一次只能运行一个子应用，window 属性多时性能下降。

2. Proxy 模式：现代浏览器可用。为每个子应用创建一个代理 window（fakeWindow），访问先查代理，未命中再访问真实 window；卸载时销毁代理。优点：可同时加载多个子应用，性能更好。
                             

## **wujei方案**
css隔离：webComponent 的 Shadow DOM
js沙箱 iframe


微前端跨域解决
```js
// 在vite/webpack配置文件里配置
server/devServer:{
    headers:{
        'Access-Control-Allow-Origin':'*'
    }
}
```


## monorepo架构
1. 多个项目的node_modules公共模块共享
2. 子模块代码复用 比如axios 等 